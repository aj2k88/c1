"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},util=function(){function t(e){}var n=console.log,r=console.debug,o=console.info,c={Maestro:/^(5[06-9]|6[37])\d*$/,"Diner's Club":/^3(0[0-5]|[689])\d*$/,"American Express":/^3[47]\d*$/,Visa:/^4\d*$/,Mastercard:/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[0-1]|2720)\d*$/,Discover:/^(6011|65|64[4-9])\d*$/,JCB:/^(2131|1800|35)\d*$/,UnionPay:/^(((620|(621(?!83|88|98|99))|622(?!06|018)|62[3-6]|627[02,06,07]|628(?![01])|629[1,2]))\d*|622018\d{12})$/},i={12:["Maestro"],13:["Maestro"],14:["Diner's Club","Maestro"],15:["American Express","Maestro"],16:["Visa","Mastercard","Diner's Club","Discover","JCB","UnionPay","Maestro"],17:["JCB","UnionPay","Maestro"],18:["Visa","JCB","UnionPay","Maestro"],19:["Visa","Diner's Club","Discover","JCB","UnionPay","Maestro"]},e=["ccswap-frame"];return{doNothing:function(){},identity:function(e){return e},isFalse:function(){return!1},appendTextElement:function(e,t,n){var r=e.createElement("PRE");r.innerText=t,e.getElementById(n).appendChild(r)},mapAttribute:function(e,t){return e.map(function(e){return(e[t]||"").split(" ")}).reduce(function(e,t){return e.concat(t)},[])},debug:function(e){e?(console.log=n,console.debug=r,console.info=o):(console.log=t,console.debug=t,console.info=t)},validLuhn:function(e){for(var t=0,n=e.length,r=n%2,o=0;o<n;o++){var c=e[o]-"0";o%2==r&&9<(c*=2)&&(c-=9),t+=c}return t%10==0},validCC:function(e){e=e.replace(/ /g,"");var t=i[e.length];if(void 0===t)return!1;for(var n=0;n<t.length;n++)if(c[t[n]].test(e)&&this.validLuhn(e))return!0;return!1},version:function(){return"0.0.0"},getIframesToIgnoreByName:function(){return e}}}();function fingerprint(e,i){function t(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(console.log("looking at node"),console.log(r),"hidden"===r.type||r.disabled||r.offsetWidth<5&&r.offsetHeight<5&&r.getClientRects().length<5)console.log("curNode isn't visible -- skipping");else if(r.isVisible()){for(var o={id:getVal(r,"id"),name:getVal(r,"name"),size:getVal(r,"size"),className:r.className||"",type:getVal(r,"type"),dataNgModel:getVal(r,"data-ng-model")},c=0;c<i.length;c++)o[i[c]]=getVal(r,i[c]);t[t.length]=o}else console.log("curNode isn't visible 2nd test-- skipping")}return t}var n=(n=t(e.getElementsByTagName("input"))).concat(t(e.getElementsByTagName("select")));return console.log("done fingerprinting"),console.log(n),n}function buildNodeInfo(e,t){for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n].name;"type"===r||r.startsWith("on")||"value"===r||r.startsWith("data-")&&"data-braintree-name"!==r||(e[r]=t.attributes[n].value)}return e.id||(e.id=""),e.name||(e.name=""),e}function discoverFingerprintFields(e){function t(e,t){for(var n=[],r=0;r<e.length;r++){var o=function(e,t){if(console.log("looking at node"),console.log(e),"hidden"===e.type||e.disabled||e.offsetWidth<5&&e.offsetHeight<5&&e.getClientRects().length<5)return console.log(e.id+": curNode isn't visible -- skipping"),null;if(!e.isVisible())return console.log(e.id+": curNode isn't visible 2nd test -- skipping"),null;t=t(e);return null==t?null:buildNodeInfo(t,e)}(e[r],t);null!=o&&(n[n.length]=o)}return n}var n=(n=t(e.getElementsByTagName("input"),function(e){return"text"!==e.type&&"tel"!==e.type&&"number"!==e.type&&"month"!==e.type&&"password"!==e.type?(console.log(e.id+": curNode isn't a text or tel or number or month -- skipping"),null):{type:getVal(e,"type")}})).concat(t(e.getElementsByTagName("select"),function(e){for(var t={type:"select"},n=[],r=0;r<e.options.length;r++)n[r]=e.options[r].label;return t.optvals=n,t}));return console.log("done discovery fingerprinting"),console.log(n),n}function getVal(e,t){e=e.attributes[t];return e?e.value:""}util.debug(!1),Element.prototype.isVisible=function(){return!0};var selectorList=[{selector:"[autocomplete*='cc-number']",name:"Google Autocomplete",event:"AutoComplete_Rule_Generated"},{selector:"[id$='_ccno']",name:"",event:"Generic_Rule_Generated"},{selector:"[data-braintree-name='number']",name:"Braintree",event:"Generic_Rule_Generated"},{selector:"[id=dwfrm_billing_paymentMethods_creditCard_number]",name:"",event:"Generic_Rule_Generated"}];function findAutocompleteCCNum(e){console.log("checking for autocomplete cc num");for(var t=0;t<selectorList.length;t++)for(var n=e.querySelectorAll(selectorList[t].selector),r=0;r<n.length;r++){var o=n[r];if(o&&(console.log("found: "+o.type+" "+o.disabled+" "+o.offsetWidth+" "+o.offsetHeight+" "+o.getClientRects().length),("text"===o.type||"tel"===o.type||"number"===o.type||"password"===o.type)&&!o.disabled&&(5<=o.offsetWidth||5<=o.offsetHeight||5<=o.getClientRects().length)&&o.isVisible()))return console.log("Found a cc number with autocomplete!"),{possibleCCNum:o,event:selectorList[t].event}}return console.log("No cc number with autocomplete found"),null}var populator={host:"",rules:[],transaction_id:"",populate:function(e,t,n,r,o){for(var c=[],i=0;i<populator.rules.length;i++){var l=populator.rules[i];try{var a=null,s=null,u="";if("string"==typeof l){console.log("Evaluating string rule: "+l);var d=l.indexOf(":");if(-1===d)continue;var s=l.substring(0,d),_=l.substring(d+1).trim();if(0===_.length){console.log("Empty rule: "+l);continue}if("command"===s)a=dsl.commands[_];else{var g=evaluateRuleString(s,_);if(g.error){c.push(g.error);continue}a=g.doer,u=g.dateFormat}}else{if("[object Array]"!==Object.prototype.toString.call(l)){console.log("Failed to process rule "+l+"; curRule is of type "+(void 0===l?"undefined":_typeof(l))),c.push({subject:"autofill_fail",body:{transaction_id:populator.transaction_id,cur_rule_field:s,msg:"Failed to process rule "+l+"; curRule is of type "+(void 0===l?"undefined":_typeof(l)),cur_rule:l}});continue}console.log("Evaluating array rule: "+l),s=l[0].trim();var f,p=dsl.generators[l[1].trim()],v=dsl.identifiers[l[2].trim()],m=l[3].trim(),y=util.identity,b=(4<l.length&&((f=l[4].trim()).startsWith("df-")?(y=dsl.converters.dateFormat.convert,u=f.substring(3)):y=dsl.converters[f].convert),doNothingGenerator),a=p(v,m,y,b=5<l.length?dsl.generators[l[5].trim()]:b)}var h="";if(""!==u)h=[n,r,u];else switch(s){case"cc":h=t;break;case"month":h=n;break;case"year":h=r;break;case"cvv":h=o;break;case"cardType":h=e;break;case"date":h=[n,r];break;case"command":h={cardType:e,cc:t,month:n,year:r,cvv:o};break;default:console.log("unsupported dataType: "+s+" ignoring");continue}a(h),c.push({subject:"autofill_success",body:{transaction_id:populator.transaction_id,cur_rule_field:s,cur_rule:l}})}catch(e){console.log("Failed rule: "+l+" "+e),c.push({subject:"autofill_fail",body:{msg:e,transaction_id:populator.transaction_id,cur_rule_field:s,cur_rule:l}})}}return c}};function evaluateRuleString(e,t){var n="",r=t.indexOf("(");if(-1===r)return{error:{subject:"autofill_fail",body:{transaction_id:populator.transaction_id,cur_rule_field:e,cur_rule:t,msg:"Invalid string rule"}}};var o=[],r=(o.push(t.substring(0,r).trim()),o.push(t.substring(r+1)),dsl.generators[o[0].trim()]);if(void 0===r)return console.log("couldn't find generator '"+o[0].trim()+"'"),{error:{subject:"autofill_fail",body:{transaction_id:populator.transaction_id,cur_rule_field:e,cur_rule:t,msg:"couldn't find generator '"+o[0].trim()+"'"}}};var o=o[1].slice(0,-1).split(","),c=dsl.identifiers[o[0].trim()];if(void 0===c)return console.log("couldn't find identifier '"+o[0].trim()+"'"),{error:{subject:"autofill_fail",body:{transaction_id:populator.transaction_id,cur_rule_field:e,cur_rule:t,msg:"couldn't find identifier '"+o[0].trim()+"'"}}};var i=(i=o[1].trim()).slice(1,-1),l=util.identity;if(3<=o.length){var a=o[2].trim();if(a.startsWith("df-"))l=dsl.converters.dateFormat.convert,n=a.substring(3);else{var s=dsl.converters[a];if(!s||!s.convert)return console.log("couldn't find converter '"+a),{error:{subject:"autofill_fail",body:{transaction_id:populator.transaction_id,cur_rule_field:e,cur_rule:t,msg:"couldn't find converter '"+a}}};l=s.convert}}a=doNothingGenerator;if(4<=o.length){s=o[3].trim();if(!(l=dsl.generators[s]))return console.log("couldn't find generator '"+s),{error:{subject:"autofill_fail",body:{transaction_id:populator.transaction_id,cur_rule_field:e,cur_rule:t,msg:"couldn't find generator '"+s}}}}return{doer:r(c,i,l,a),dateFormat:n}}var CARD_TYPE={mastercard:0,visa:1};function doListener(e){var t,n,r,o;return"populate_generate_card_number"===e.action?(console.log("populating cc -- content script"),o=CARD_TYPE[e.tokenType]||0,t=e.cc,r=e.expFull.split("/"),n=parseInt(r[0]),(r=parseInt(r[1]))<2e3&&(r+=2e3),{response:{action:"inject_attempted",result:(o=sePopulate(o,t,n,r,e.cvv)).result},messages:o.messages}):{response:null,messages:[]}}function sePopulate(e,t,n,r,o){return 0===populator.rules.length?{result:!1,messages:[]}:{result:!0,messages:populator.populate(e,t,n,r,o)}}function doNothingGenerator(e,t,n){return function(e){}}function extractOriginPath(t){try{var e=new URL(t);return e.origin+e.pathname}catch(e){return console.log("Invalid url: "+t),""}}console.log("loaded communicator"),window.platform={_api:void 0,get api(){if(!this._api){this._api="undefined"!=typeof chrome&&Object.getPrototypeOf(chrome)===Object.prototype?chrome:browser;try{this._api.runtime}catch(e){throw new Error('Expected either a global "chrome" or "browser" web extension API namespace')}}return this._api},getURL:function(e){return this.api.runtime.getURL(e)},lastError:function(){return"lastError"in this.api.runtime||console.error("runtime.lastError is not supported. See compat table: https://mzl.la/3adhTHt "),this.api.runtime.lastError},sendMessage:function(e,t){return this.api.runtime.sendMessage(e,t)},tabSendMessage:function(e,t,n){return this.api.tabs.sendMessage(e,t,n)},tabGet:function(e,t){return this.api.tabs.get(e,t)},localStorageSet:function(e,t){return this.api.storage.local.set(e,t)},localStorageGet:function(e,t){return this.api.storage.local.get(e,t)},onMessage:function(e){return this.api.runtime.onMessage.addListener(e)},onUpdate:function(e){return this.api.tabs.onUpdated.addListener(e)}},function(){function t(){n(document),console.log("registering listener observer in "+document.URL),x.observe(document,{childList:!0,subtree:!0,attributes:!0})}function c(e){if(e)switch(e.status){case"rules":console.log("got rules "+e.rules+" in "+document.URL),populator.rules=e.rules,populator.host=e.host,populator.transaction_id=e.transaction_id,u.takeRecords(),u.disconnect(),_(),m.autocomplete_detect=e.autocomplete_detect,l();break;case"monitor":f||(console.log("got monitor in "+document.URL),u.observe(document,{childList:!0,subtree:!0,attributes:!0}),f=!0),m.autocomplete_detect=e.autocomplete_detect,e.hasRules||"report"!==m.autocomplete_detect||t();break;case"done":console.log("got done in "+document.URL),u.takeRecords(),u.disconnect(),m.card_num_detect=e.card_num_detect,m.autocomplete_detect=e.autocomplete_detect,!m.card_num_detect&&"off"===m.autocomplete_detect||t()}else console.log(platform.lastError())}function i(e){console.log("testing for a cc"),console.log(e),util.validCC(e.target.value)&&(C=buildNodeInfo({type:getVal(e.target,"type")},e.target),v=binList.validateC1CC(e.target.value),platform.sendMessage({discoverFingerprint:!0,discoveryMethod:"Manual_CC_Entry",context:v}))}function n(e){if("off"!==m.autocomplete_detect&&!y){var t=findAutocompleteCCNum(e);if(null!==t&&(C=buildNodeInfo({type:getVal(t.possibleCCNum,"type")},t.possibleCCNum),setTimeout(function(){platform.sendMessage({discoverFingerprint:!0,discoveryMethod:t.event})},1e3),"report"!==m.autocomplete_detect))return}if(m.card_num_detect){var n=e.getElementsByTagName("input");console.log("There are "+n.length+" input elements on the page right now"),console.log("registering blur and focus listeners");for(var r=0;r<n.length;r++){var o,c=n[r];"text"!==c.type&&"tel"!==c.type&&"number"!==c.type&&"password"!==c.type||(o=c.id+"-"+c.name,h[o]||(c.addEventListener("blur",i,!1),console.log("added event listener to field with id "+c.id+" and name "+c.name),h[o]=!0))}}}function o(e){if(M||"report"===m.autocomplete_detect&&y&&"Manual_CC_Entry"!==e)return b="off",void console.log("set processingState to off in discoverFingerprint in ",document.URL);"report"!==m.autocomplete_detect&&(M=!0),console.log("found a cc field on a new site! Adding!");var t=discoverFingerprintFields(document),n=(console.log(t),a);"report"===m.autocomplete_detect&&"Manual_CC_Entry"!==e&&(n=r),platform.sendMessage({newCCField:!0,allInputs:t,ccNode:C,discoveryMethod:e,referrer:extractOriginPath(document.referrer),url:extractOriginPath(document.URL),context:v},n)}function r(e){e.done&&(y=!0,console.log("set sentAutoCompleteReport to true in doneReporting")),"in_process"===b?(b="off",console.log("set processingState to off in doneReporting in ",document.URL)):(b="in_process",console.log("set processingState to in_process in doneReporting in ",document.URL," running discoverFingerprint again"),o(e.discoveryMethod))}function l(){for(var e=document.getElementsByTagName("input"),t=0;t<e.length;t++){var n=e[t];"text"!==n.type&&"tel"!==n.type&&"number"!==n.type&&"password"!==n.type||n.removeEventListener("blur",i,!1)}console.log("clearing listener observer in "+document.URL),x.takeRecords(),x.disconnect()}function a(e){l(),e.done&&(populator.rules=e.newRule.rules,populator.host=e.newRule.host,populator.transaction_id=e.transaction_id,_(),b="in_process",console.log("set processingState to in_process in doneInstrumenting in ",document.URL,"after resp.done")),"in_process"===b?(b="off",console.log("set processingState to off in doneInstrumenting in ",document.URL)):(b="in_process",console.log("set processingState to in_process in doneInstrumenting in ",document.URL," running discoverFingerprint again"),o(e.discoveryMethod))}function s(){for(var e,t=fingerprint(document,p),n=(console.log("finished fingerprinting"),console.log(t),platform.sendMessage({fingerprint:t},c),document.getElementsByTagName("iframe")),r=0;r<n.length;r++){var o=n[r];(e=o).disabled||util.getIframesToIgnoreByName().includes(e.name)||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)||(console.log("Sending message to "+o.src),o.contentWindow.postMessage({action:"seFingerprint"},"*"))}}var u=new MutationObserver(function(e){document.hidden||s()});function d(){platform.sendMessage({shouldFingerprint:!0},function(e){e.process?(console.log("starting fingerprinting"),p=e.extraAttribs||[],console.log("extraAttribs:"),console.log(p),s()):(console.log("unsupported site"),m.card_num_detect=e.card_num_detect,m.autocomplete_detect=e.autocomplete_detect,e.has_rules||!m.card_num_detect&&"off"===m.autocomplete_detect||t())})}function _(){e||(platform.onMessage(function(e,t,n){for(var r=doListener(e),o=0;o<r.messages.length;o++){c=i=c=void 0;var c=r.messages[o].subject,i=r.messages[o].body;c={action:"track_event",event:{event:c}},(i=i||{}).hostname=populator.host,i.url=extractOriginPath(document.URL),i.referrer=extractOriginPath(document.referrer),c.event.extra=i,console.log("sending track_event message"),console.log(c),platform.sendMessage(c)}null!==r.response&&platform.sendMessage(r.response)}),e=!0)}var g=!1,f=!1,p=[],v=null,m={},y=!1,b="off",h={},M=!1,C=void 0,e=(window.addEventListener("message",function(e){e.data&&e.data.action&&"seFingerprint"===e.data.action&&(console.log("received seFingerprint event in iframe: "+document.URL),g||(console.log("I am now visible via message! "+document.URL),g=!0,d()))},!1),!1),x=new MutationObserver(function(e){console.log("inside listener observer in "+document.URL),document.hidden?console.log("\thidden -- doing nothing"):(console.log("\tinstrumenting fields"),n(document))});platform.onMessage(function(t,e,n){if(t.discoverFingerprint){if("off"!==b)return b="in_process_msg",void console.log("set processingState to in_process_msg in registerDynamicFingerprintingListeners in ",document.URL);b="in_process",console.log("set processingState to in_process in registerDynamicFingerprintingListeners in ",document.URL),o(t.discoveryMethod)}var r;t.rediscoverFingerprint&&(console.log("rediscovering fingerprints on a refresh command"),r=discoverFingerprintFields(document),console.log(r),console.log(C),platform.sendMessage({rescanFields:!0,allInputs:r,ccNode:C},function(e){e.done&&(populator.rules=e.newRule.rules,populator.host=e.newRule.host,populator.transaction_id=e.transaction_id,populator.populate(t.curState.cardType,t.curState.cc,t.curState.month,t.curState.year,t.curState.cvv))})),"stop_listeners"!==t.action&&"toggleExtension"!==t.action||(console.log("pulling all listeners because the extension has been activated manually!"),l())}),setTimeout(function(){if(self===top)console.log("I am now visible! "+document.URL),g=!0,d();else if(util.getIframesToIgnoreByName().includes(self.name))return;console.log("not top"),document.body.offsetWidth&&document.body.offsetHeight&&document.body.getClientRects().length?(console.log("not top, but visible "+document.URL),g=!0,d()):platform.sendMessage({shouldFingerprint:!0},function(e){e.process||(m.card_num_detect=e.card_num_detect,m.autocomplete_detect=e.autocomplete_detect,e.has_rules||!m.card_num_detect&&"off"===m.autocomplete_detect||(console.log("unsupported site -- instrument for future detection"),t()))})},1e3),platform.onMessage(function(e,t,n){e.action&&"refingerprint"===e.action&&(console.log("receiving a refingerprint request - and reactivating the mutation observer"),u.observe(document,{childList:!0,subtree:!0,attributes:!0}))}),self===top&&platform.sendMessage({action:"wipe"})}();var binList={validateC1CC:function(e){var t,n={400344:"eligible_c1_cc_entry",403065:"eligible_c1_cc_entry",403200:"eligible_c1_cc_entry",403201:"eligible_c1_cc_entry",403202:"eligible_c1_cc_entry",403299:"eligible_c1_cc_entry",403444:"eligible_c1_cc_entry",403694:"eligible_c1_cc_entry",404614:"eligible_c1_cc_entry",404615:"eligible_c1_cc_entry",406096:"eligible_c1_cc_entry",410608:"eligible_c1_cc_entry",410673:"eligible_c1_cc_entry",412128:"eligible_c1_cc_entry",412174:"eligible_c1_cc_entry",412179:"eligible_c1_cc_entry",413028:"eligible_c1_cc_entry",413113:"eligible_c1_cc_entry",413140:"eligible_c1_cc_entry",413160:"eligible_c1_cc_entry",413165:"eligible_c1_cc_entry",413170:"eligible_c1_cc_entry",413716:"eligible_c1_cc_entry",414709:"eligible_c1_cc_entry",415557:"eligible_c1_cc_entry",416841:"eligible_c1_cc_entry",420042:"eligible_c1_cc_entry",420043:"eligible_c1_cc_entry",421759:"eligible_c1_cc_entry",421794:"eligible_c1_cc_entry",422983:"eligible_c1_cc_entry",423311:"eligible_c1_cc_entry",423340:"eligible_c1_cc_entry",424735:"eligible_c1_cc_entry",426930:"eligible_c1_cc_entry",426932:"eligible_c1_cc_entry",426933:"eligible_c1_cc_entry",426934:"eligible_c1_cc_entry",426944:"eligible_c1_cc_entry",426993:"eligible_c1_cc_entry",426994:"eligible_c1_cc_entry",426996:"eligible_c1_cc_entry",427501:"eligible_c1_cc_entry",427502:"eligible_c1_cc_entry",427546:"eligible_c1_cc_entry",429137:"eligible_c1_cc_entry",429184:"eligible_c1_cc_entry",429185:"eligible_c1_cc_entry",430200:"eligible_c1_cc_entry",430572:"eligible_c1_cc_entry",431047:"eligible_c1_cc_entry",431467:"eligible_c1_cc_entry",431468:"eligible_c1_cc_entry",431663:"eligible_c1_cc_entry",431689:"eligible_c1_cc_entry",431734:"eligible_c1_cc_entry",438826:"eligible_c1_cc_entry",438845:"eligible_c1_cc_entry",438856:"eligible_c1_cc_entry",438864:"eligible_c1_cc_entry",440560:"eligible_c1_cc_entry",440561:"eligible_c1_cc_entry",443122:"eligible_c1_cc_entry",443508:"eligible_c1_cc_entry",449882:"eligible_c1_cc_entry",463099:"eligible_c1_cc_entry",463814:"eligible_c1_cc_entry",464444:"eligible_c1_cc_entry",464445:"eligible_c1_cc_entry",465602:"eligible_c1_cc_entry",466303:"eligible_c1_cc_entry",466304:"eligible_c1_cc_entry",466306:"eligible_c1_cc_entry",466307:"eligible_c1_cc_entry",466309:"eligible_c1_cc_entry",466800:"eligible_c1_cc_entry",468405:"eligible_c1_cc_entry",468406:"eligible_c1_cc_entry",471206:"eligible_c1_cc_entry",473068:"eligible_c1_cc_entry",473344:"eligible_c1_cc_entry",474672:"eligible_c1_cc_entry",474673:"eligible_c1_cc_entry",474743:"eligible_c1_cc_entry",475086:"eligible_c1_cc_entry",475698:"eligible_c1_cc_entry",477767:"eligible_c1_cc_entry",478827:"eligible_c1_cc_entry",478828:"eligible_c1_cc_entry",479365:"eligible_c1_cc_entry",480385:"eligible_c1_cc_entry",486236:"eligible_c1_cc_entry",487333:"eligible_c1_cc_entry",487334:"eligible_c1_cc_entry",493422:"eligible_c1_cc_entry",512025:"eligible_c1_cc_entry",512026:"eligible_c1_cc_entry",512027:"eligible_c1_cc_entry",512300:"eligible_c1_cc_entry",512731:"eligible_c1_cc_entry",512734:"eligible_c1_cc_entry",514953:"eligible_c1_cc_entry",515592:"eligible_c1_cc_entry",515593:"eligible_c1_cc_entry",515596:"eligible_c1_cc_entry",515597:"eligible_c1_cc_entry",515598:"eligible_c1_cc_entry",515599:"eligible_c1_cc_entry",515600:"eligible_c1_cc_entry",515676:"eligible_c1_cc_entry",517669:"eligible_c1_cc_entry",517805:"eligible_c1_cc_entry",517993:"eligible_c1_cc_entry",517997:"eligible_c1_cc_entry",517998:"eligible_c1_cc_entry",518374:"eligible_c1_cc_entry",518726:"eligible_c1_cc_entry",520094:"eligible_c1_cc_entry",520101:"eligible_c1_cc_entry",520103:"eligible_c1_cc_entry",520104:"eligible_c1_cc_entry",520105:"eligible_c1_cc_entry",520106:"eligible_c1_cc_entry",520118:"eligible_c1_cc_entry",520611:"eligible_c1_cc_entry",520612:"eligible_c1_cc_entry",521331:"eligible_c1_cc_entry",521506:"eligible_c1_cc_entry",522233:"eligible_c1_cc_entry",522955:"eligible_c1_cc_entry",524324:"eligible_c1_cc_entry",525999:"eligible_c1_cc_entry",528942:"eligible_c1_cc_entry",529107:"eligible_c1_cc_entry",529115:"eligible_c1_cc_entry",529123:"eligible_c1_cc_entry",529149:"eligible_c1_cc_entry",531480:"eligible_c1_cc_entry",531651:"eligible_c1_cc_entry",532830:"eligible_c1_cc_entry",540159:"eligible_c1_cc_entry",540419:"eligible_c1_cc_entry",540420:"eligible_c1_cc_entry",540421:"eligible_c1_cc_entry",540422:"eligible_c1_cc_entry",540423:"eligible_c1_cc_entry",540424:"eligible_c1_cc_entry",540425:"eligible_c1_cc_entry",540426:"eligible_c1_cc_entry",540633:"eligible_c1_cc_entry",540704:"eligible_c1_cc_entry",540791:"eligible_c1_cc_entry",540801:"eligible_c1_cc_entry",541058:"eligible_c1_cc_entry",541336:"eligible_c1_cc_entry",541402:"eligible_c1_cc_entry",541444:"eligible_c1_cc_entry",541448:"eligible_c1_cc_entry",541458:"eligible_c1_cc_entry",541474:"eligible_c1_cc_entry",541536:"eligible_c1_cc_entry",541549:"eligible_c1_cc_entry",541578:"eligible_c1_cc_entry",541586:"eligible_c1_cc_entry",541627:"eligible_c1_cc_entry",541829:"eligible_c1_cc_entry",542442:"eligible_c1_cc_entry",542583:"eligible_c1_cc_entry",542775:"eligible_c1_cc_entry",543328:"eligible_c1_cc_entry",543339:"eligible_c1_cc_entry",543368:"eligible_c1_cc_entry",543857:"eligible_c1_cc_entry",543961:"eligible_c1_cc_entry",544045:"eligible_c1_cc_entry",544316:"eligible_c1_cc_entry",544515:"eligible_c1_cc_entry",544516:"eligible_c1_cc_entry",544910:"eligible_c1_cc_entry",545800:"eligible_c1_cc_entry",546281:"eligible_c1_cc_entry",546283:"eligible_c1_cc_entry",546608:"eligible_c1_cc_entry",546630:"eligible_c1_cc_entry",546720:"eligible_c1_cc_entry",548885:"eligible_c1_cc_entry",548892:"eligible_c1_cc_entry",548897:"eligible_c1_cc_entry",548950:"eligible_c1_cc_entry",548951:"eligible_c1_cc_entry",548955:"eligible_c1_cc_entry",549062:"eligible_c1_cc_entry",549066:"eligible_c1_cc_entry",549107:"eligible_c1_cc_entry",549110:"eligible_c1_cc_entry",549111:"eligible_c1_cc_entry",549112:"eligible_c1_cc_entry",549120:"eligible_c1_cc_entry",549121:"eligible_c1_cc_entry",549506:"eligible_c1_cc_entry",550300:"eligible_c1_cc_entry",552436:"eligible_c1_cc_entry",554356:"eligible_c1_cc_entry",400229:"ineligible_c1_cc_entry",411507:"ineligible_c1_cc_entry",414311:"ineligible_c1_cc_entry",415417:"ineligible_c1_cc_entry",419310:"ineligible_c1_cc_entry",479124:"ineligible_c1_cc_entry",480213:"ineligible_c1_cc_entry",543895:"ineligible_c1_cc_entry",547855:"ineligible_c1_cc_entry",552851:"ineligible_c1_cc_entry",552869:"ineligible_c1_cc_entry",558958:"ineligible_c1_cc_entry"},r=(console.log("validateC1CC called"),extractBinFromCCNum(e));return Object.keys(n).forEach(function(e){e==r&&(t=n[e])}),console.log("ccTypeVal: "+t),null==t?"non_c1_cc_entry":t}};function extractBinFromCCNum(e){return(e=e.replace(/ /g,"")).substring(0,6)}function sleep(t){return new Promise(function(e){return setTimeout(e,t)})}function checkIdentiferValid(n){return function(e){var t=n(e);if(t)return t.style+="box-shadow: 0 0 5px rgba(81, 203, 238, 1); border: 1px solid rgba(81, 203, 238, 1); background-color: #bdf3f3;",t;throw"did not find element "+e}}var dsl=function(){function d(e){var t=new Event("change",s);e.dispatchEvent(t)}function _(e){var t=new Event("blur",s);e.dispatchEvent(t)}function l(e,t){for(var n=0;n<e.length;n++)if(e[n].text==t)return e.value=e[n].value,d(e),!0;return!1}var s={bubbles:!0},u=["keydown","keypress","textInput","input","keyup","change"],a=["input","change"];return{commands:{refresh:function(e){browser.runtime.sendMessage({rediscoverFingerprint:!0,curState:e},function(e){})}},generators:{bbbSelect:function(n,r,o){return function(e){var t=n(r);t&&(e="[value='"+o(e)+"']",t.querySelector(e).click())}},disneySelect:function(n,r,o){return function(e){var t=n(r);t&&(t.querySelector(".btn").click(),t.querySelector("span[title='"+o(e)+"']").click())}},disneyResortSelect:function(e,n,r){return function(e){var t=document.querySelector('div[aria-owns="'+n+'"]');t&&(console.log("first node: "+t),t.click(),t=r(e),console.log("converted value: "+t),document.getElementById(n).querySelectorAll('li[data-display="'+t+'"]')[0].click())}},microsoftSelect:function(c,i,l){return function(e){var t=c(i);if(t){t.querySelector(".btn").click(),console.log("attempting to find election");for(var n=t.querySelectorAll("a"),r=l(e),o=0;o<n.length;o++){if(n[o].text&&n[o].text.trim().toLowerCase()==r)return void n[o].click();console.log(n)}}}},xoomSelect:function(n,r,o){return function(e){var t=n(r);t&&(t.click(),(t=document.getElementById(o(e))).click())}},twoClickSelect:function(r,o,c,i){return function(e){var t=JSON.parse(o),n=(console.log("value 0: "+t[0]),console.log("value 1: "+t[1]),r(t[0]));n&&(n.click(),console.log("find loc : "+t[1]),dsl.generators.simpleClickWait(r,t[1],c,i,1)(e))}},simpleClickWait:function(r,o,c,i,l){return function(n){console.log("simpleclickwait starting! for location: "+n),sleep(500).then(function(){void 0===l?(console.log("Initialize simpleclickwait iterations to 1"),l=1):l+=1;var t,e=c(n),e=o.replace("{{value}}",""+e);try{t=r(e)}catch(e){t=null}null===t&&l<3?dsl.generators.simpleClickWait(r,o,c,i,l+1)(n):(t.click(),e=new Event("click",s),t.dispatchEvent(e))})}},textInsertWait:function(n,r,o,c,i){return function(e){console.log("will wait for appearance of element: "+r+" value: "+o(e)+" iterations: "+i),sleep(1500).then(function(){var t;void 0===i?(console.log("Initialize iterations to 1"),i=1):i+=1;try{t=n(r)}catch(e){t=null}(null===t&&i<3?dsl.generators.textInsertWait(n,r,o,c,i+1):dsl.generators.textInsertMaster(n,r,o))(e)})}},textInsertChangeEventOnly:function(c,i,l){return function(e){e=l(e);var t=c(i);if(t){t.focus();var n=new Event("focus",s);t.dispatchEvent(n),e=(t.value="")+e;for(var r=0;r<e.length;r++){var o=e.charAt(r);t.value=0===r?""+o:""+t.value+o}n=new Event("change",s),t.dispatchEvent(n)}}},textInsertMaster:function(i,l,a){return function(e){e=a(e);var t=i(l);if(t){t.focus();var n=new Event("focus",s);t.dispatchEvent(n),e=(t.value="")+e;for(var r=0;r<e.length;r++){var o=e.charAt(r);t.value=0===r?""+o:""+t.value+o;for(var c=0;c<u.length;c++){n=new Event(u[c],s);t.dispatchEvent(n)}}t.blur(),n=new Event("blur",s),t.dispatchEvent(n)}}},inputMonth:function(o,c,i){return function(e){e=i(e);var t=o(c);if(t){t.value=e;for(var n=0;n<a.length;n++){var r=new Event(a[n],s);t.dispatchEvent(r)}}}},makeVisible:function(n,r,e){return function(e){console.log("in makevisible");var t=n(r);t&&(t.style.display="block")}},doFocusOutEvent:function(r,o,e){return function(e){var t,n=r(o);n&&(n.focus(),t=new Event("focusout",s),n.dispatchEvent(t))}},clickRadio:function(n,r,e){return function(e){var t=n(r);t&&(t.checked=!0,d(t))}},simpleRadioClick:function(n,r,o){return function(e){var t,e=o(e),e=r.replace("{{value}}",""+e),e=n(e);e&&(e.checked=!0,t=new Event("click",s),e.dispatchEvent(t))}},simpleClick:function(n,r,o){return function(e){var t,e=o(e),e=r.replace("{{value}}",""+e),e=n(e);e&&(e.click(),t=new Event("click",s),e.dispatchEvent(t))}},cardTypeSelect:function(o,c,i){return function(e){var t=o(c);if(t){for(var n=i(e),r=0;r<t.length;r++)t[r].text.toLowerCase().replace(/ /g,"")==n.toLowerCase().replace(/ /g,"")&&(t.value=t[r].value);d(t)}}},select:function(o,c,i){return function(e){var t=o(c);if(t){for(var n=i(e),r=0;r<t.length;r++)t[r].text==n&&(t.value=t[r].value);d(t)}}},selectBlur:function(o,c,i){return function(e){var t=o(c);if(t){for(var n=i(e).toLowerCase(),r=0;r<t.length;r++)t[r].text.toLowerCase()===n&&(t.value=t[r].value);d(t),_(t)}}},monthSelectBlur:function(c,i,e){return function(e){var t=c(i);if(t){for(var n=t[0].text,r=(13===t.length&&(n=t[1].text),/January/i.test(n)&&(console.log("found January in option"),n=n.replace(/January/i,"MM")),/Jan/i.test(n)&&(console.log("found Jan in option"),n=n.replace(/Jan/i,"M")),/01/.test(n)&&(console.log("found 01 in option"),n=n.replace(/01/,"mm")),/1/.test(n)&&(console.log("found 1 in option"),n=n.replace(/1/,"m")),dsl.converters.dateFormat.convert([e,0,n]).toLowerCase()),o=0;o<t.length;o++)t[o].text.toLowerCase()===r&&(t.value=t[o].value);d(t),_(t)}}},yearSelectBlur:function(s,u,e){return function(e){var t=s(u);if(t){for(var n=void 0,r=0;r<2;r++){var o=a(t[r].text),c=a(t[r+1].text);if(4===o&&4===c){n="yyyy";break}if(2===o&&2===c){n="yy";break}}for(var i=dsl.converters.dateFormat.convert([0,e,n]).toLowerCase(),l=0;l<t.length;l++)t[l].text.toLowerCase()===i&&(t.value=t[l].value);d(t),_(t)}function a(e){for(var t=0,n=0;n<e.length&&!(e[n]<"0"||"9"<e[n]);n++)t++;return t}}},cardTypeSelectBlur:function(o,c,e){var i=[/master.*card/i,/visa/i];return function(e){var t=o(c);if(t){for(var n=i[e],r=0;r<t.length;r++)n.test(t[r].text)&&(t.value=t[r].value);d(t),_(t)}}},selectTrimText:function(o,c,i){return function(e){var t=o(c);if(t){var n=i(e);"string"==typeof n&&(console.log("trim string"),n=n.trim());for(var r=0;r<t.length;r++)t[r].text.trim()==n&&(t.value=t[r].value);d(t)}}},selectWait:function(n,r,o,c,i){return function(e){console.log("will wait for appearance of element: "+r+" value: "+o(e)+"iterations: "+i),sleep(500).then(function(){var t;void 0===i?i=1:i+=1;try{t=n(r)}catch(e){t=null}(null===t&&i<3?dsl.generators.selectWait(n,r,o,c,i+1):dsl.generators.select(n,r,o))(e)})}},cardTypeSelectWait:function(n,r,o,c,i){return function(e){console.log("will wait for appearance of element: "+r+" value: "+o(e)+"iterations: "+i),sleep(500).then(function(){var t;void 0===i?i=1:i+=1;try{t=n(r)}catch(e){t=null}(null===t&&i<3?dsl.generators.cardTypeSelectWait(n,r,o,c,i+1):dsl.generators.cardTypeSelect(n,r,o))(e)})}},selectIndex:function(n,r,o){return function(e){var t=n(r);t&&(e=o(e),t.selectedIndex=e)}},selectIndexCorrect:function(n,r,o){return function(e){console.log("selectIndexChgEvt populating "+e);var t=n(r);t&&(e=o(e),t.value=e)}},selectIndexCorrectBlur:function(n,r,o){return function(e){console.log("selectIndexChgEvt populating "+e);var t=n(r);t&&(e=o(e),t.value=e,d(t),t.blur())}},selectCIBlur:function(o,c,i){return function(e){var t=o(c);if(t){for(var n=i(e),r=0;r<t.length;r++)if(t[r].text.toLowerCase()===n.toLowerCase()){t.value=t[r].value;break}d(t),t.blur()}}},bootstrap_select:function(o,c,i){return function(e){var t=i(e),n=o(c);if(n){for(var r=!1;n&&!r;)console.log("node type next: "+n.tagName),"SELECT"===n.tagName&&(r=l(n,t)),n=n.nextSibling;for(n=o(c);n&&!r;)console.log("node type prev: "+n.tagName),"SELECT"===n.tagName&&(r=l(n,t)),n=n.previousSibling;r||console.log("giving up on setting bootstrap value")}}},angular_select:function(c,i,l){return function(e){var t=c(i);if(t){for(var n=t.querySelectorAll("span"),r=0;r<n.length;r++){console.log("angular"),console.log(n[r]);for(var o=0;o<n[r].classList.length;o++)console.log("---\x3e"+n[r].classList[o]),"qsel-title"==n[r].classList[o]&&(n[r].textContent=l(e))}d(t),t.blur()}}},text_insert_evt:function(n,r,o){return function(e){var t=n(r);t&&(t.focus(),document.execCommand("insertText",!1,o(e)),d(t),t.blur())}},click_with_insert:function(n,r,o){return function(e){var t=n(r);t&&(e=o(e),t.value=e,t.click(),e=new Event("blur",s),t.dispatchEvent(e))}},dhgate_card_type:function(e,t,n){return function(e){"mc"==dsl.cardTypes.shortNames[e]?document.getElementById("tab-MasterCard").click():"visa"==dsl.cardTypes.shortNames[e]&&document.getElementById("tab-Visa").click()}},cardTypeRadio:function(e,o,c){return function(e){var t=document.getElementsByName(o),r=document.getElementsByTagName("LABEL");for(var n=0;n<t.length;n++)if(t[n].value.toLowerCase()==c(e).toLowerCase()||function(e,t){for(var n=0;n<r.length;n++)if(r[n].htmlFor==e)return r[n].innerHTML.toLowerCase()==t.toLowerCase()}(t[n].id,c(e)))return void t[n].click()}},cardTypeRadioContains:function(e,c,i){return function(e){var t=document.getElementsByName(c),r=document.getElementsByTagName("LABEL");for(var n=i(e).toLowerCase(),o=0;o<t.length;o++)if(t[o].value.toLowerCase().includes(n)||function(e,t){for(var n=0;n<r.length;n++)if(r[n].htmlFor===e)return r[n].innerHTML.toLowerCase().includes(t)}(t[o].id,n))return void t[o].click()}},textInnerText:function(n,r,o){return console.log("in inner text setting"),function(e){console.log("in textInnerText Set");var t=n(r);t&&(t.innerText=o(e))}},text_insert_if_visible:function(n,r,o){return console.log("in text_insert if visible"),function(e){console.log("in text_insert populator; value: "+e);var t=n(r);t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&dsl.generators.textInsertMaster(n,r,o)(e)}},text_insert_keyup_change_if_visible:function(n,r,o){return console.log("in text_insert"),function(e){console.log("in text_insert populator");var t=n(r);t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(t.focus(),document.execCommand("selectAll",!1,null),document.execCommand("insertText",!1,o(e)),d(t),e=new Event("keyup",s),t.dispatchEvent(e),e=new Event("blur",s),t.dispatchEvent(e),console.log("done"))}},text_insert:function(n,r,o){return console.log("in text_insert"),function(e){console.log("in text_insert populator; value: "+e);var t=n(r);t&&(e=o(e),t.value=e,t.focus(),document.execCommand("selectAll",!1,null),document.execCommand("insertText",!1,e),e=new Event("blur",s),t.dispatchEvent(e),console.log("done"))}},text_insert_keyup_change:function(n,r,o){return console.log("in text_insert"),function(e){console.log("in text_insert populator");var t=n(r);t&&(t.focus(),document.execCommand("selectAll",!1,null),document.execCommand("insertText",!1,o(e)),d(t),e=new Event("keyup",s),t.dispatchEvent(e),e=new Event("blur",s),t.dispatchEvent(e),console.log("done"))}}},identifiers:{extraAttrib:checkIdentiferValid(function(e){for(var t=document.querySelectorAll(e),n=0;n<t.length;n++){var r=t[n];if(("INPUT"===r.tagName||"SELECT"===r.tagName)&&!r.disabled&&(5<=r.offsetWidth||5<=r.offsetHeight||5<=r.getClientRects().length))return t[n]}return null}),id:checkIdentiferValid(function(e){return document.getElementById(e)}),name:checkIdentiferValid(function(e){return document.getElementsByName(e)[0]}),nameVisible:checkIdentiferValid(function(e){for(var t=document.getElementsByName(e),n=0;n<t.length;n++){var r=t[n];if(r.offsetWidth&&r.offsetHeight&&r.getClientRects().length)return r}return null}),className:checkIdentiferValid(function(e){for(var t=document.getElementsByClassName(e),n=0;n<t.length;n++)if("INPUT"===t[n].tagName||"SELECT"===t[n].tagName)return t[n];return null}),xpath:checkIdentiferValid(function(e){e=document.evaluate(e,document);return null==e?null:e.iterateNext()}),iframeInput:checkIdentiferValid(function(e){return document.URL.includes(e)?document.getElementsByTagName("input")[0]:null}),firstInput:checkIdentiferValid(function(e){return document.getElementsByTagName("input")[0]}),angularId:checkIdentiferValid(function(e){return document.querySelectorAll('[ng-model="'+e+'"]')[0]}),querySel:checkIdentiferValid(function(e){var e=e.split("##"),t=e[0],n=e[1];return console.log(e.length),console.log("Locator for querySel: "+t),console.log("ArrayPos for querySel: "+n),document.querySelectorAll(t)[n]})},cardTypes:{shortNames:["mc","visa"],longNames:["mastercard","visa"]},converters:{dateFormat:{description:"Uses a date formatter to specify format based on month and year",convert:function(e){for(var n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=e[0],c=e[1],t=e[2],i="",l="",a=function(e){for(var t="";0<e.length;)e.startsWith("yyyy")?(t=t+""+c,e=e.substring(4)):e.startsWith("yy")?(t=t+""+c%100,e=e.substring(2)):e.startsWith("mm")?(t=o<10?t+"0"+o:t+""+o,e=e.substring(2)):e.startsWith("MM")?(t+=n[o-1],e=e.substring(2)):e.startsWith("m")?(t=t+""+o,e=e.substring(1)):e.startsWith("M")&&(t+=r[o-1],e=e.substring(1));return t},s=0;s<t.length;s++){var u=t[s];"m"!==u&&"M"!==u&&"y"!==u?(0<l.length&&(i+=a(l),l=""),i+=u):0===l.length||l[l.length-1]===u?l+=u:(i+=a(l),l=""+u)}return i+=a(l)}},hdMonthConverter:{description:"A temporary converter for Home Depot month that uses date converter",convert:function(e){return dsl.converters.dateFormat.convert([e,2e3,"mm - MM"])}},hdYearConverter:{description:"A temporary converter for Home Depot year that uses date converter",convert:function(e){return dsl.converters.dateFormat.convert([1,e,"yyyy"])}},terminixCardType:{description:"Card type as two words; capital first letter, lower case others",convert:function(e){return"0"==e?"Master Card":"Visa"}},fullMonth:{description:"Long month (January)",convert:function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return console.log("Selected value: "+t[e-1]),t[e-1]}},zeroPad:{description:"Add leading 0 example: 01",convert:function(e){return e<10?(console.log("++++ leftpad 0"+e),"0"+e):(console.log("---- leftpad "+e),""+e)}},card:{description:"NO DESCRIPTION GIVEN!",convert:function(e){return"0"==e?"MASTER_CARD":"VISA"}},cardLowerCase:{description:"mastercard or visa (Lower Case) ",convert:function(e){return"0"==e?"mastercard":"visa"}},wildLifeCardType:{description:"VS = visa, MC = mastercard",convert:function(e){return"0"==e?"MC":"VS"}},agodaCardType:{description:"For agoda.com. Always returns 998,0",convert:function(e){return"998,0"}},cardAerLingus:{description:"0 = visa, 1 = mastercard",convert:function(e){return"0"==e?"MASTERCARD":"VISA CARD"}},"card Credit Card":{description:"Returns credit card with the word Credit Card after it, example: Visa Credit Card",convert:function(e){return"0"==e?"MASTERCARD CREDIT CARD":"VISA CREDIT CARD"}},cardOneWord:{description:"NO DESCRIPTION GIVEN!",convert:function(e){return"0"==e?"MASTERCARD":"VISA"}},cardCondor:{description:"Credit card type for www.condor.com only, where mastercard is the 2nd pos in the radiobutton list",convert:function(e){return"0"==e?2:3}},cardCamelCase:{description:"MasterCard or Visa (Camel Cased) ",convert:function(e){return"0"==e?"MasterCard":"Visa"}},cardSportsman:{description:"Mastercard or Visa® (Registered Trademark) ",convert:function(e){return"0"==e?"Mastercard":"Visa®"}},cardMasterCardEuroCard:{description:"Mastercard is recorded as mastercard/eurocard!!",convert:function(e){return"0"==e?"MASTERCARD/EUROCARD":"VISA"}},cardCardEuroCardNoSurcharge:{description:"Mastercard is recorded as mastercard/eurocard (no surcharge), visa is recorded as visa (no surcharge)",convert:function(e){return"0"==e?"MASTERCARD/EUROCARD (NO SURCHARGE)":"VISA (NO SURCHARGE)"}},fosterAndSmithCardType:{description:"fosterandsmith.com only",convert:function(e){return"0"==e?"2":"1"}},cardShort:{description:"NO DESCRIPTION GIVEN!",convert:function(e){return"0"==e?"MA":"VI"}},cardVerizon:{description:"NO DESCRIPTION GIVEN!",convert:function(e){return"0"==e?"MC":"VI"}},cardAbbreviation:{description:"Abbreviated card type: MC or VISA",convert:function(e){return"0"==e?"MC":"VISA"}},lowesCardType:{description:"Card type as two words: Master Card",convert:function(e){return"0"==e?"Master Card":"VISA"}},venusCardType:{description:"Card type as two words: Master Card",convert:function(e){return dsl.converters.cardOneWord.convert(e)+" - Credit"}},monthShort:{description:"Short month example: Jan",convert:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1]}},monthLong:{description:"Long month example: January",convert:function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]}},monthZero:{description:"Zero offset value example 1 returns 0",convert:function(e){return e-1}},yearZero:{description:"Returns the offset from *this* year example: 2018 would return 1",convert:function(e){return e-(new Date).getFullYear()}},yearOne:{description:"Returns the offset from *this* year + 1example: 2018 would return 2",convert:function(e){return e-(new Date).getFullYear()+1}},hdMonth:{description:"NO DESCRIPTION GIVEN!!",convert:function(e){return"object:"+(e+27)}},hdYear:{description:"NO DESCRIPTION GIVEN!",convert:function(e){return"object:"+(e+-1977)}},"MM Parentheses Mon":{description:"Two Digit Month Short (Month) example: 01 (Jan)",convert:function(e){return console.log(dsl.converters.zeroPad.convert(e)+" ("+dsl.converters.monthShort.convert(e)+")"),dsl.converters.zeroPad.convert(e)+" ("+dsl.converters.monthShort.convert(e)+")"}},"M - Mon":{description:"Month - Short Month example: 1 - Jan",convert:function(e){return e+" - "+dsl.converters.monthShort.convert(e)}},MON:{description:"Short Month with a lead 01 literal example: 01-Jul",convert:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1].toUpperCase()}},"MM - Mon":{description:"Zero Pad Month - Short Month example: 01 - Jan",convert:function(e){return dsl.converters.zeroPad.convert(e)+" - "+dsl.converters.monthShort.convert(e)}},"MM - MON":{description:"Zero Pad Month - SHORT MONTH example: 01 - JAN",convert:function(e){return dsl.converters["MM - Mon"].convert(e).toUpperCase()}},"MM - Month":{description:"Zero Pad Month - Long Month example: 01 - January",convert:function(e){return dsl.converters.zeroPad.convert(e)+" - "+dsl.converters.monthLong.convert(e)}},"M - Month":{description:"Single Digit Month - Long Month example: 1 - January",convert:function(e){return e+" - "+dsl.converters.monthLong.convert(e)}},"M- Month":{description:"Single Digit Month- Long Month example: 1- January (note no space after month number)",convert:function(e){return e+"- "+dsl.converters.monthLong.convert(e)}},"Mon Parentheses M":{description:"Short Month space (In Parentheses) Single Digit month example: Jan (1)",convert:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1]+" ("+e+")"}},"Mon Parentheses MM":{description:"Short Month space (In Parentheses) Zero Pad month example: Jan (01)",convert:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1]+" ("+dsl.converters.zeroPad.convert(e)+")"}},"MON Parentheses MM":{description:"Short Month (all caps!) space (In Parentheses) Zero Pad month example: JAN (01)",convert:function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1].toUpperCase()+" ("+dsl.converters.zeroPad.convert(e)+")"}},Default:{description:"No Modifications to data. A noop",convert:function(e){return e}},YY:{description:"Two Digit Year example: 18",convert:function(e){return e%100}},MM_YY:{description:"Two Digit Month_Two Digit Year example: 01_18",convert:function(e){var t=e[0],e=e[1]%100;return console.log("mm_yy"),dsl.converters.zeroPad.convert(t)+"_"+e}},"MM-YY":{description:"Two Digit Month - Two Digit Year example: 01-18",convert:function(e){var t=e[0],e=e[1]%100,t=dsl.converters.zeroPad.convert(t)+"-"+e;return console.log("mm-yy"),t}},"MM/YY":{description:"Two Digit Month/Two Digit Year example: 01/18",convert:function(e){var t=e[0],e=e[1]%100,t=dsl.converters.zeroPad.convert(t)+"/"+e;return console.log("mm/yy"),t}},"MM YY":{description:"Two Digit Month  Two Digit Year example: 01 18",convert:function(e){var t=e[0],e=e[1]%100,t=dsl.converters.zeroPad.convert(t)+" "+e;return console.log("mm yy"),t}},"MM-YYYY":{description:"Two Digit Month-Four Digit Year example: 01-2018",convert:function(e){var t=e[0],e=e[1],t=dsl.converters.zeroPad.convert(t)+"-"+e;return console.log("mm-yyyy"),t}},"MM/YYYY":{description:"Two Digit Month/Four Digit Year example: 01/2018",convert:function(e){var t=e[0],e=e[1],t=dsl.converters.zeroPad.convert(t)+"/"+e;return console.log("mm/yyyy"),t}},"Mon-M":{description:"Short Month-Month example: Jan-1",convert:function(e){return dsl.converters.monthShort.convert(e)+"-"+e}},MMYY:{description:"Two Digit MonthTwo Digit Year example: 0118",convert:function(e){var t=e[0],e=e[1]%100,t=dsl.converters.zeroPad.convert(t)+""+e;return console.log("mmyy"),t}},MMYYYY:{description:"Two Digit MonthFour Digit Year example: 012018",convert:function(e){var t=e[0],e=e[1],t=dsl.converters.zeroPad.convert(t)+""+e;return console.log("mmyy"),t}},"01-Mon":{description:"Short Month with a lead 01 literal example: 01-Jul",convert:function(e){return"01-"+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e-1]}},visa:{description:"Finds the Visa card entry!",convert:function(e){return"visa"}},mastercard:{description:"Finds the MasterCard entry!",convert:function(e){return"mastercard"}},MM:{description:"Two Digit Month example: 01",convert:function(e){return dsl.converters.zeroPad.convert(e)}},"MM-Month":{description:"Two Digit Month Long -  Month example: 01-January",convert:function(e){return dsl.converters.zeroPad.convert(e)+"-"+dsl.converters.monthLong.convert(e)}},"M-Month":{description:"One Digit Month Long -  Month example: 1-January",convert:function(e){return e+"-"+dsl.converters.monthLong.convert(e)}},"MM-Mon":{description:"Two Digit Month Short -  Month example: 01-Jan",convert:function(e){return dsl.converters.zeroPad.convert(e)+"-"+dsl.converters.monthShort.convert(e)}},"MM Month":{description:"Two Digit Month Long Month example: 01 January",convert:function(e){return dsl.converters.zeroPad.convert(e)+" "+dsl.converters.monthLong.convert(e)}},"MM (Mon)":{description:"Two Digit Month Short (Month) example: 01 (Jan)",convert:function(e){return dsl.converters.zeroPad.convert(e)+" ("+dsl.converters.monthShort.convert(e)+")"}},"MM Mon":{description:"Two Digit Month Short Month example: 01 Jan",convert:function(e){return dsl.converters.zeroPad.convert(e)+" "+dsl.converters.monthShort.convert(e)}},cardFirstFour:{description:"Get the first four digits from card example: XXXX",convert:function(e){return e.substring(0,4)}},cardSecondFour:{description:"Get the second set of four digits from card example: XXXX",convert:function(e){return e.substring(4,8)}},cardThirdFour:{description:"Get the third set of four digits from card example: XXXX",convert:function(e){return e.substring(8,12)}},cardLastFour:{description:"Get the last four digits from card example: XXXX",convert:function(e){return e.substring(12,16)}},cardFormat:{description:"Format like a credit card number: XXXX XXXX XXXX XXXX",convert:function(e){for(var t=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),n=t&&t[0]||"",r=[],o=0,c=n.length;o<c;o+=4)r.push(n.substring(o,o+4));return r.length?(console.log("called and returning credit card"),r.join(" ")):e}},StateLong:{description:"This does not exist. KitchenAid added it for future expansion.",convert:function(e){return e}},StateShort:{description:"This does not exist. KitchenAid added it for future expansion.",convert:function(e){return e}}}}}();console.log("loaded dsl");